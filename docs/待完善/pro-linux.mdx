import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Linux

## å‰è¨€
- æ­¤æ•™ç¨‹ä»…ä¸º<span className={"text-red-500"}>  CentOS 7.9 </span>ç³»ç»Ÿåšæ¼”ç¤ºï¼Œå…¶ä»–ç³»ç»Ÿå‘½ä»¤å¤§åŒå°å¼‚ï¼Œ<span className={"text-red-500"}>è¯·ä»”ç»†åŒºåˆ«å®‰è£…</span>
- æ­¤æ•™ç¨‹åªé’ˆå¯¹æ‰‹åŠ¨å®‰è£…AikanProçš„æ­£å¼ç”¨æˆ·ï¼ŒAikanFreeç”¨æˆ·è¯·çœ‹å¼€æºç‰ˆå®‰è£…ï¼Œä»¥å…å®‰è£…åæ— æ³•æ­£å¸¸ä½¿ç”¨ï¼
- æ‰‹åŠ¨å®‰è£…éœ€è¦æ‰‹åŠ¨å®‰è£…Javaç¯å¢ƒï¼Œå»ºè®®å®‰è£…<span className={"text-red-500"}> JDK1.8åŠä»¥ä¸Šç‰ˆæœ¬</span> å®‰è£…æ–¹æ³•è¯·è‡ªè¡Œç™¾åº¦.å®˜ç½‘ï¼šğŸ‘‰ [ç‚¹å‡»è¿›å…¥](https://www.oracle.com/java/technologies/downloads/#java8)


<span className={"text-red-500"}>æç¤ºï¼šéƒ¨ç½² ZFile æèµ ç‰ˆä¹‹å‰ï¼Œè¯·å…ˆåœæ­¢ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œè¿™ä¸ªå¾ˆé‡è¦ï¼Œä¸ç„¶å¯èƒ½ä¼šé€ æˆæ•°æ®æ–‡ä»¶æŸå.</span>

## å…¨æ–°éƒ¨ç½²
:::tip å®‰è£…ç¯å¢ƒ

ç”±äºè½¯ä»¶è¿è¡Œç¯å¢ƒåŸå› ï¼Œç³»ç»Ÿå¿…é¡»å®‰è£…ä»¥ä¸‹ç¯å¢ƒï¼Œè¯·æå‰éƒ¨ç½²ï¼Œä»¥å…åœ¨æ­£å¼å®‰è£…é€ æˆå®‰è£…é—®é¢˜.

å¦‚æœä½ ä¸çŸ¥é“ä½ çš„ç¯å¢ƒåˆ°åº•æ˜¯ `64 ä½` è¿˜æ˜¯ `32 ä½`ï¼Œä¸€èˆ¬æ¥è¯´å°±æ˜¯ `64 ä½`ã€‚

éœ€è¦ç”¨åˆ°çš„ç¯å¢ƒï¼šPHP7.2ï¼ˆéœ€è¦å®‰è£…æ’ä»¶SG15å’ŒRedisï¼‰ã€Redisã€Mysqlã€Nginx

:::
## é…ç½®è¿‡ç¨‹
è´­ä¹°åè¯·è”ç³»è´Ÿè´£äººï¼ˆä¸å‡ºæ„å¤–åº”è¯¥æ˜¯è”ç³»æˆ‘æœ¬äººï¼‰ï¼Œç»™ä½ éƒ¨ç½²ç¨‹åº
ä¸å‡ºæ„å¤–åº”è¯¥ä¼šç»™/ä¸‹è½½ ä¸€ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼Œç¼ºä¸€ä¸å¯ï¼ï¼ï¼
<a target="_blank" rel="noopener noreferrer">
<img width="100" src="/img/install/pro-linux-01.png"  width="550" height="350" alt="AikanPro"/> </a>


å»ºè®®å®‰è£…é¡ºåºï¼Œè‡ªä¸Šè€Œä¸‹ï¼š

- AikanProApi.jar   
- AikanProï¼ˆphpåå°ï¼‰
- App æºç 
:::
**tips: å¦‚æœä½ ä¸çŸ¥é“ä½ çš„ç¯å¢ƒåˆ°åº•æ˜¯ `amd64` è¿˜æ˜¯ `arm`ï¼Œä¸€èˆ¬æ¥è¯´å°±æ˜¯ `amd64`ï¼Œä¸€èˆ¬ `arm` æ¶æ„çš„æœºå™¨ï¼Œè´­ä¹°æ—¶ä¼šç‰¹æ®Šæ ‡æ³¨çš„ã€‚**

# AikanProApiå®‰è£…è¿‡ç¨‹ï¼ˆç¬¬ä¸€æ­¥ï¼‰

#### åœ¨å®Œæˆç¯å¢ƒå‡†å¤‡åï¼Œå°†AikanProApiæ”¾è¿›ä¸€ä¸ªè‹±æ–‡æ–‡ä»¶å¤¹åï¼Œæ”¾åœ¨ä¸€ä¸ªç”¨äºè¿è¡Œçš„ç›®å½•ï¼ˆå°½é‡ä¸è¦å‡ºç°ä¸­æ–‡ï¼‰ï¼Œä¸Šä¼ åˆ°ä½ çš„æœåŠ¡å™¨ï¼Œè®°æ¸…æ¥šç›®å½•ï¼Œç„¶åç”¨ä¸‹é¢è¿™ä¸ªè„šæœ¬ï¼ŒæŠŠå®é™…çš„åå­—å’Œç›®å½•å®Œå…¨ä¿®æ”¹ä¸ºä½ çš„å®é™…è·¯å¾„ï¼Œè„šæœ¬ä¿®æ”¹å®Œæ¯•åä¿å­˜é€€å‡ºï¼Œ

```bash showLineNumbers
#!/bin/bash
# å®šä¹‰å˜é‡
# è¦è¿è¡Œçš„jaråŒ…è·¯å¾„ï¼ŒåŠ ä¸åŠ å¼•å·éƒ½è¡Œã€‚ æ³¨æ„ï¼šç­‰å·ä¸¤è¾¹ ä¸èƒ½ æœ‰ç©ºæ ¼ï¼Œå¦åˆ™ä¼šæç¤ºcommandæ‰¾ä¸åˆ°
JAR_NAME="/usr/local/AikanProApi/AikanProApi.jar"
# æ—¥å¿—è·¯å¾„ï¼ŒåŠ ä¸åŠ å¼•å·éƒ½è¡Œã€‚ æ³¨æ„ï¼šç­‰å·ä¸¤è¾¹ ä¸èƒ½ æœ‰ç©ºæ ¼ï¼Œå¦åˆ™ä¼šæç¤ºcommandæ‰¾ä¸åˆ°
LOG_PATh=/www/wwwlogs/AikanPro/AikanPro.log
 
 
# å¦‚æœè¾“å…¥æ ¼å¼ä¸å¯¹ï¼Œç»™å‡ºæç¤ºï¼
tips() {
	echo ""
	echo "æç¤º!!!......è¯·ä½¿ç”¨å‘½ä»¤:sh  RuleApi.sh [start|stop|restart|yunxing].   ä¾‹å¦‚: sh RuleApi.sh start  "
	echo ""
	exit 1
}
 
# å¯åŠ¨æ–¹æ³•
start() {
        # é‡æ–°è·å–ä¸€ä¸‹pidï¼Œå› ä¸ºå…¶å®ƒæ“ä½œå¦‚stopä¼šå¯¼è‡´pidçš„çŠ¶æ€æ›´æ–°
	pid=`ps -ef | grep $JAR_NAME | grep -v grep | awk '{print $2}'`
        # -z è¡¨ç¤ºå¦‚æœ$pidä¸ºç©ºæ—¶æ‰§è¡Œ
	if [ -z $pid ]; then
        nohup java -jar $JAR_NAME >out.txt >&1 &
        pid=`ps -ef | grep $JAR_NAME | grep -v grep | awk '{print $2}'`
		echo ""
        echo "æœåŠ¡æ­£åœ¨è¿è¡Œï¼Œä»–çš„pid:${pid}."
		echo "........................æœåŠ¡å¯åŠ¨æˆåŠŸï¼........................."
                                echo "start=....OK!"
                                echo ""
	else
		echo ""
		echo "æœåŠ¡æ­£åœ¨è¿è¡Œ,ä»–çš„æœåŠ¡æ˜¯ pid:${pid}. å¦‚æœæœ‰å¿…è¦, è¯·ä½¿ç”¨: sh webftp.sh restart.æ¥é‡å¯æœåŠ¡"
		echo ""
	fi
}
 
# åœæ­¢æ–¹æ³•
stop() {
		# é‡æ–°è·å–ä¸€ä¸‹pidï¼Œå› ä¸ºå…¶å®ƒæ“ä½œå¦‚startä¼šå¯¼è‡´pidçš„çŠ¶æ€æ›´æ–°
	pid=`ps -ef | grep $JAR_NAME | grep -v grep | awk '{print $2}'`
        # -z è¡¨ç¤ºå¦‚æœ$pidä¸ºç©ºæ—¶æ‰§è¡Œã€‚ æ³¨æ„ï¼šæ¯ä¸ªå‘½ä»¤å’Œå˜é‡ä¹‹é—´ä¸€å®šè¦å‰ååŠ ç©ºæ ¼ï¼Œå¦åˆ™ä¼šæç¤ºcommandæ‰¾ä¸åˆ°
	if [ -z $pid ]; then
		echo ""
        echo "æœåŠ¡æœªè¿è¡Œï¼æ²¡æœ‰å¿…è¦é˜»æ­¢å®ƒ!"
		echo ""
	else
		kill -9 $pid
		echo ""
		echo "æœåŠ¡åœæ­¢æˆåŠŸï¼pid:${pid}å·²è¢«å¼ºåˆ¶æ€æ­»ï¼"
		echo "stop=....OK!"
                                echo ""
	fi
}
 
# è¾“å‡ºè¿è¡ŒçŠ¶æ€æ–¹æ³•
yunxing() {
        # é‡æ–°è·å–ä¸€ä¸‹pidï¼Œå› ä¸ºå…¶å®ƒæ“ä½œå¦‚stopã€restartã€startç­‰ä¼šå¯¼è‡´pidçš„çŠ¶æ€æ›´æ–°
	pid=`ps -ef | grep $JAR_NAME | grep -v grep | awk '{print $2}'`
        # -z è¡¨ç¤ºå¦‚æœ$pidä¸ºç©ºæ—¶æ‰§è¡Œã€‚æ³¨æ„ï¼šæ¯ä¸ªå‘½ä»¤å’Œå˜é‡ä¹‹é—´ä¸€å®šè¦å‰ååŠ ç©ºæ ¼ï¼Œå¦åˆ™ä¼šæç¤ºcommandæ‰¾ä¸åˆ°
	if [ -z $pid ];then
		echo ""
        echo "æœåŠ¡æ²¡æœ‰åœ¨è¿è¡Œï¼"
		echo ""
	else
		echo ""
        echo "æœåŠ¡æ­£åœ¨è¿è¡Œï¼ä»–çš„pid=${pid}"
		echo ""
	fi
}
 
# é‡å¯æ–¹æ³•
restart() {
	echo ""
	echo ".............................é‡æ–°å¯åŠ¨.............................."
	echo ""
		# é‡æ–°è·å–ä¸€ä¸‹pidï¼Œå› ä¸ºå…¶å®ƒæ“ä½œå¦‚startä¼šå¯¼è‡´pidçš„çŠ¶æ€æ›´æ–°
	pid=`ps -ef | grep $JAR_NAME | grep -v grep | awk '{print $2}'`
        # -z è¡¨ç¤ºå¦‚æœ$pidä¸ºç©ºæ—¶æ‰§è¡Œã€‚ æ³¨æ„ï¼šæ¯ä¸ªå‘½ä»¤å’Œå˜é‡ä¹‹é—´ä¸€å®šè¦å‰ååŠ ç©ºæ ¼ï¼Œå¦åˆ™ä¼šæç¤ºcommandæ‰¾ä¸åˆ°
	if [ ! -z $pid ]; then
		kill -9 $pid
	fi
	start
                echo ".........."
	echo "....................é‡æ–°å¯åŠ¨æˆåŠŸ..........................."
                echo "restart=....OK!"
                echo ""
}
 
# æ ¹æ®è¾“å…¥å‚æ•°æ‰§è¡Œå¯¹åº”æ–¹æ³•ï¼Œä¸è¾“å…¥åˆ™æ‰§è¡Œtipsæç¤ºæ–¹æ³•
case "$1" in
   "start")
     start
     ;;
   "stop")
     stop
     ;;
   "yunxing")
     yunxing
     ;;
   "restart")
     restart
     ;;
   *)
     tips
     ;;
esac
```
*tips   : è„šæœ¬è¦ä»¥sh ç»“å°¾ï¼Œç±»ä¼¼äºWindowsçš„bat*

#### å‡å¦‚ä½ ç»™è„šæœ¬èµ·çš„åå­—ä¸ºï¼ŒAikanPro.sh,åˆ™æ‰§è¡Œè¿è¡Œä¸‹é¢å‘½ä»¤å³å¯å¯åŠ¨é¡¹ç›®

```bash showLineNumbers
sh AikanPro.sh start
```
#### å¯åŠ¨åæµè§ˆå™¨è®¿é—® **`http://ip:8080`** å³å¯ï¼Œå¦‚å¯åŠ¨åæ— æ³•è®¿é—®ï¼Œè¯·æ£€æŸ¥ **`ç«¯å£æ˜¯å¦å†²çª`** æˆ– **`é˜²ç«å¢™/å®‰å…¨ç»„æ˜¯å¦å¼€å¯`**ï¼Œå‡ºç°å¦‚ä¸‹ç•Œé¢ï¼Œé‚£å°±æ˜¯å®‰è£…æˆåŠŸï¼Œ

<a target="_blank" rel="noopener noreferrer">
<img width="100" src="/img/install/pro-linux-05.jpg" width="800" height="400"  /> </a>

#### æ¥ä¸‹æ¥ç”¨Nginxåšåå‘ä»£ç†ï¼Œç”¨åŸŸåç›´æ¥è®¿é—®APIï¼ŒNgxin å…·ä½“é…ç½®å¦‚ä¸‹ï¼ˆä¼ªé™æ€ï¼‰ï¼Œ

```bash showLineNumbers
location ^~ / {
  add_header 'Access-Control-Allow-Origin' '*';
  add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE';
  add_header 'Access-Control-Allow-Credentials' 'true';
  add_header 'Access-Control-Allow-Headers' 'Authorization,Content-Type,Accept,Origin,User-Agent,DNT,Cache-Control,X-Mx-ReqToken,X-Data-Type,X-Requested-With,X-Data-Type,X-Auth-Token';
  if ( $request_method = 'OPTIONS' ) { 
    return 200;
  }
  proxy_pass http://127.0.0.1:8080;
  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header REMOTE-HOST $remote_addr;
}
```
#### å½“ä½ åŸŸå+IPå‡å¯è®¿é—®æ­¤API   è‡ªæ­¤apiå®‰è£…å®Œæ¯•ï¼Œæ€»çš„æ¥è¯´è›®ç®€å•çš„

<a target="_blank" rel="noopener noreferrer">
<img width="100" src="/img/install/pro-linux-05.jpg" width="800" height="400"  /> </a>

#### å› ä¸ºæ–‡æ¡£é»˜è®¤è¿è¡Œç«¯å£æ˜¯8080ï¼Œä½ ä¹Ÿå¯ä»¥ç¼–è¾‘application.propertiesæ–‡ä»¶ï¼Œä¿®æ”¹é»˜è®¤ç«¯å£ã€æ•°æ®åº“å’ŒRedisçš„é“¾æ¥é…ç½®

```bash showLineNumbers
# æœåŠ¡ç«¯å£
server.port=8080

# mysqlé…ç½®
spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://127.0.0.1:3306/æ•°æ®åº“å?characterEncoding=UTF-8
spring.datasource.username=æ•°æ®åº“ç”¨æˆ·å
spring.datasource.password=æ•°æ®åº“å¯†ç 
# mysqlæ•°æ®è¡¨å‰ç¼€ï¼Œå¦‚æœæ²¡æ”¹è¿‡å°±åˆ«åŠ¨
mybatis.configuration.variables.prefix=typecho                             
```

ç®€å•æ£€æŸ¥æ–¹å¼ä¸ºåœ¨æœåŠ¡å™¨æ‰§è¡Œ `curl http://127.0.0.1:8080`
- å¦‚è¿”å› `curl: (7) Failed connect to 127.0.0.1:8080; Connection refused` è¡¨ç¤ºæœªå¯åŠ¨æˆåŠŸã€‚
- å¦‚è¿”å› `<!DOCTYPE html> <html lang="zh-CN">â€¦â€¦` ç­‰å­—æ ·è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼Œå¦‚å¯åŠ¨æˆåŠŸä½†é€šè¿‡æœåŠ¡å™¨ IP æ— æ³•è®¿é—®ï¼Œé‚£ä¸€èˆ¬å°±æ˜¯é˜²ç«å¢™/å®‰å…¨ç»„æœªæ”¾è¡Œç«¯å£é—®é¢˜ã€‚



## å…¶ä»–å‘½ä»¤ {#command}

#### å‡å¦‚ä½ ç»™è„šæœ¬èµ·çš„åå­—ä¸ºï¼ŒAikanPro.sh  å¦‚ä¿®æ”¹äº†å®‰è£…è·¯å¾„è¯·è‡ªè¡Œæ›´æ”¹å‘½ä»¤æ‰€åœ¨è·¯å¾„ã€‚

```bash showLineNumbers
sh AikanPro.sh start    # å¯åŠ¨é¡¹ç›®
sh AikanPro.sh stop     # åœæ­¢é¡¹ç›®
sh AikanPro.sh restart  #é‡å¯é¡¹ç›®
sh AikanPro.sh yunxing  #æ£€æµ‹é¡¹ç›®æ˜¯å¦å¯åŠ¨
```
## åŸŸåå¯ä»¥è®¿é—®åï¼Œæˆ‘ä»¬è¿›è¡Œæ“ä½œé…ç½®
#### åœ¨é…ç½® application.properties æ–‡ä»¶ä¸­æ­£ç¡®é…ç½®å®Œæ¯•æ•°æ®åº“åï¼Œæˆ‘ä»¬ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è¿›è¡Œæ•°æ®åº“é…ç½®
<a target="_blank" rel="noopener noreferrer">
<img width="100" src="/img/install/pro-linux-06.jpg" width="800" height="400"  /> </a>

#### æ­£ç¡®å¡«å†™å¦‚ä¸‹ä¿¡æ¯ï¼Œè®°ä½æ¯ä¸ªå¯†ç ï¼Œåé¢æˆ‘ä»¬éƒ½ç”¨çš„åˆ°
<a target="_blank" rel="noopener noreferrer">
<img width="100" src="/img/install/pro-linux-07.jpg" width="800" height="400"  /> </a>


# AikanProï¼ˆåå°ï¼‰å®‰è£…è¿‡ç¨‹ï¼ˆç¬¬äºŒæ­¥ï¼‰

#### æ–°å»ºä¸€ä¸ªç½‘ç«™ï¼Œç½‘ç«™è§£æçš„åŸŸåå¿…é¡»æ˜¯ä½ æä¾›ç»™æˆ‘çš„æˆæƒåŸŸå
```bash showLineNumbers
server  {
   listen 80;
   server_name docs.qxzhi.com;
   index  index.html ;
   location  / {
  add_header 'Access-Control-Allow-Origin' '*';
  add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE';
  add_header 'Access-Control-Allow-Credentials' 'true';
  add_header 'Access-Control-Allow-Headers' 'Authorization,Content-Type,Accept,Origin,User-Agent,DNT,Cache-Control,X-Mx-ReqToken,X-Data-Type,X-Requested-With,X-Data-Type,X-Auth-Token';
  if ( $request_method = 'OPTIONS' ) { 
    return 200;
     }
  }
access_log /www/wwwlogs/docs-qxzhi/docs.qxzhi-access.log;
error_log /www/wwwlogs/docs-qxzhi/docs.qxzhi-error.log;
      }
```
#### æŠŠæˆ‘ç»™ä½ çš„æºç æ­£å¸¸æ­å»ºç½‘ç«™ä¸€æ ·æ”¾åˆ°è¿è¡Œç›®å½•
<a target="_blank" rel="noopener noreferrer">
<img width="100" src="/img/install/pro-linux-02.jpg" width="800" height="400"  /> </a>
#### åœ¨æºç ç›®å½•é‡Œé¢æ‰¾åˆ°æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼Œè¿›è¡Œæ•°æ®åº“é…ç½®ä¿®æ”¹
<a target="_blank" rel="noopener noreferrer">
<img width="100" src="/img/install/pro-linux-03.jpg" width="800" height="400"  /> </a>
#### æ‰“å¼€åŸŸåå®Œæˆåå°
<a target="_blank" rel="noopener noreferrer">
<img width="100" src="/img/install/pro-linux-04.jpg" width="800" height="400"  /> </a>

```bash showLineNumbers
é»˜è®¤è´¦å·å¯†ç ä¸ºä¸Šé¢å®‰è£…AikanProApiæ—¶ï¼Œç‚¹é¦–æ¬¡å®‰è£…æ—¶åˆ›å»ºçš„è´¦å·å’Œå¯†ç ï¼Œä¸€èˆ¬æ¥è¯´éƒ½æ˜¯
admin   
123456
```
#### è‡´æ­¤å®‰è£…ç»“æŸ

## å¸®æˆ‘å®‰è£…ğŸ”
[æŠ€æœ¯æ”¯æŒ](/support/)
